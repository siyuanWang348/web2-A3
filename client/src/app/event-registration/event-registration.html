<app-navbar></app-navbar>

<div class="container event-page">
  <!-- 错误显示 -->
  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- 加载成功 -->
  <div *ngIf="event" class="detail-card">
    <div class="event-card">
      <h2>{{ event.title || 'N/A' }}</h2>

      <div class="event-info">
        <p><strong>Date:</strong> {{ formatDate(event.event_date) }}</p>
        <p><strong>Location:</strong> {{ event.location || 'N/A' }}</p>
        <p><strong>Category:</strong> {{ event.category_name || 'N/A' }}</p>
        <p><strong>Organization:</strong> {{ event.org_name || 'N/A' }}</p>
        <p><strong>Contact:</strong> {{ event.contact_email || 'N/A' }}, {{ event.contact_phone || 'N/A' }}</p>
      </div>
      <p class="desc">{{ event.description || 'N/A' }}</p>
      <p><strong>Ticket Price:</strong> ${{ event.ticket_price ?? 'N/A' }}</p>
    </div>
  </div>

  <!-- 主内容区 -->
  <div class="registration-container" *ngIf="event">
    <h2>Register for {{ event.title }}</h2>

    <form (ngSubmit)="submitRegistration()" #regForm="ngForm" class="registration-form">
      <div class="form-group">
        <label>Name *</label>
        <input type="text" [(ngModel)]="registration.user_name" name="user_name" required>
      </div>

      <div class="form-group">
        <label>Email *</label>
        <input type="email" [(ngModel)]="registration.user_email" name="user_email" required>
      </div>

      <div class="form-group">
        <label>Phone</label>
        <input type="text" [(ngModel)]="registration.user_phone" name="user_phone">
      </div>

      <div class="form-group">
        <label>Tickets *</label>
        <input type="number" [(ngModel)]="registration.tickets" name="tickets" required min="1">
      </div>

      <div class="form-group">
        <label>Notes</label>
        <textarea [(ngModel)]="registration.notes" name="notes"></textarea>
      </div>

      <button type="submit" class="btn btn-search">Submit Registration</button>
    </form>

    <p class="success-msg" *ngIf="successMsg">{{ successMsg }}</p>
    <p class="error-msg" *ngIf="errorMsg">{{ errorMsg }}</p>
  </div>
</div>

<app-footer></app-footer>
